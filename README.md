# 🔬 K-means 클러스터링: 식품 영양소 분석 대시보드

학교 급식 식품의 에너지(kcal)와 나트륨(mg) 데이터를 **정규화 후 K-means 클러스터링**으로 분석하고 시각화한 인터랙티브 웹 대시보드입니다.

## 📊 프로젝트 개요

이 프로젝트는 학교 급식 식품 데이터를 분석하여 영양소 패턴에 따라 자동으로 그룹화하고, 사용자가 쉽게 탐색할 수 있는 대시보드를 제공합니다.

### 주요 기능

- 📈 **인터랙티브 산점도**: Plotly를 활용한 동적 시각화
- 🔍 **실시간 검색**: 식품명 또는 카테고리로 즉시 검색
- ⭐ **식품 선택 & 강조**: 클릭 시 산점도에서 별표로 표시
- 🍽️ **식판 기능**: 오늘 먹은 급식 담아서 영양소 계산
- 📊 **클러스터별 통계**: 각 그룹의 평균값과 전체 식품 목록
- 🎯 **WHO 권장량 비교**: 청소년 기준 에너지/나트륨 달성률 시각화

## 🎨 데모

### 화면 구성

```
┌─────────────────────────────────────────────────────────┐
│  🔬 K-means 클러스터링: 급식 식품 영양소 분석            │
└─────────────────────────────────────────────────────────┘
┌──────────────┬──────────────────────────────────┬────────┐
│   검색 패널   │                                  │ 식판   │
│              │  🌟 선택된 식품: 된장국           │        │
│  - 검색창    │  ┌──────────────────────┐        │ 영양   │
│  - 결과 목록 │  │  📈 산점도 (별표⭐)  │        │ 분석   │
│              │  └──────────────────────┘        │        │
│              ├──────────────────────────────────┤        │
│              │  📊 클러스터별 통계               │        │
│              ├──────────────────────────────────┤        │
│              │  🔵 중에너지/중나트륨 (167개)    │        │
│              │  🟢 저에너지/저나트륨 (445개)    │        │
│              │  🔴 저에너지/초고나트륨 (6개)    │        │
└──────────────┴──────────────────────────────────┴────────┘
```

## 🧮 분석 방법

### 데이터 전처리
- **원본 데이터**: 618개 전체 식품 (제외 없음)
- **식품중량 처리**: ml 문자 제거 후 float 변환
- **섭취량 계산**:
  ```python
  섭취에너지 = 식품중량 × 에너지(kcal) / 100
  섭취나트륨(mg) = 식품중량 × 나트륨(mg) / 100
  ```

### 클러스터링 알고리즘
```python
# StandardScaler를 사용한 정규화
X = df[['에너지(kcal)', '나트륨(mg)']]
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)

# K-means 클러스터링 (k=3)
kmeans = KMeans(n_clusters=3, random_state=42, n_init=10)
df['cluster'] = kmeans.fit_predict(X_scaled)
```

**왜 정규화?**
- 에너지와 나트륨의 스케일 차이 해소 (kcal vs mg)
- 두 변수를 동등한 비중으로 고려
- 더 균형잡힌 클러스터링 결과

### 클러스터링 품질
- **실루엣 스코어**: 0.4959
  - -1 ~ 1 범위에서 0.5에 가까우면 양호한 품질
  - 클러스터가 적절히 분리됨을 의미

## 📋 클러스터 분석 결과

### 🔵 Cluster 0: 중에너지/중나트륨 (167개)
- 평균 에너지: 190.6 kcal/100ml
- 평균 나트륨: 511.4 mg/100ml
- 평균 섭취: 176 kcal, 409 mg (1회분)
- 주요 카테고리: 볶음류(28), 튀김류(27), 구이류(24)
- **특징**: 메인 반찬, 적당히 섭취

### 🟢 Cluster 1: 저에너지/저나트륨 (445개) ⭐
- 평균 에너지: 64.8 kcal/100ml
- 평균 나트륨: 247.7 mg/100ml
- 평균 섭취: 143 kcal, 395 mg (1회분)
- 주요 카테고리: 국/탕류(92), 생채·무침류(64), 볶음류(54)
- **특징**: 건강한 기본 반찬, 가장 많은 식품군

### 🔴 Cluster 2: 저에너지/초고나트륨 (6개) ⚠️
- 평균 에너지: 65.7 kcal/100ml
- 평균 나트륨: 3,335.3 mg/100ml
- 평균 섭취: 16 kcal, 1,248 mg (1회분)
- 주요 카테고리: 김치류(3), 장류/양념류(2), 장아찌·절임류(1)
- **특징**: 조미용, 소량만 섭취 주의!

## 🚀 사용 방법

### GitHub Pages 배포

1. GitHub 저장소 생성
2. `index.html` 파일을 저장소에 업로드
3. Settings → Pages → Source를 `main` 브랜치로 설정
4. 배포된 URL로 접속

### 로컬 실행

```bash
# 간단히 HTML 파일을 브라우저로 열기
open index.html

# 또는 Python으로 로컬 서버 실행
python -m http.server 8000
# 브라우저에서 http://localhost:8000 접속
```

## 🎯 사용 가이드

### 1. 검색 기능
- 검색창에 식품명 또는 카테고리명 입력
- 실시간으로 결과 필터링
- 예시: "밥", "볶음", "국", "김치" 등

### 2. 식품 선택 & 산점도 강조
- 검색 결과 또는 클러스터 목록에서 식품 클릭
- 산점도 위에 선택된 식품 정보 표시
- 그래프에서 **노란색 별(⭐)** 로 강조
- 나머지 점들은 흐리게 처리
- **[✕ 선택 해제]** 버튼으로 초기화

### 3. 식판 기능 (오늘의 급식)
- 검색 결과에서 **[➕ 추가]** 버튼 클릭
- 식판에 담긴 식품 목록 확인
- **실시간 영양 분석**:
  - 총 에너지 & 나트륨 계산
  - WHO 권장량 대비 달성률 (프로그레스 바)
  - 클러스터별 구성 분석
  - 자동 식단 평가 & 추천
- **[✕]** 버튼으로 개별 제거
- **[🗑️ 식판 비우기]** 로 전체 삭제

### 4. WHO 권장량 기준
- **1회 에너지**: ~800 kcal (하루 2,400 kcal ÷ 3끼)
- **1회 나트륨**: ~700 mg (WHO 하루 2,000 mg ÷ 3끼)

**프로그레스 바 색상:**
- 🟢 초록 (80~120%): 적정
- 🟡 주황 (<80% 또는 120~150%): 주의
- 🔴 빨강 (>150%): 위험

### 5. 자동 식단 평가

**✅ 균형잡힌 식단**
- 조건: 에너지·나트륨 모두 90~110%
- 메시지: "에너지와 나트륨 모두 권장량에 적합합니다!"

**💡 에너지 부족**
- 조건: 에너지 <70%
- 메시지: "밥이나 고칼로리 식품을 추가하세요."

**⚠️ 나트륨 주의**
- 조건: 나트륨 >120%
- 메시지: "국/찌개류를 줄이거나 저나트륨 식품을 추가하세요."

## 🛠 기술 스택

### Frontend
- **HTML5**: 구조
- **CSS3**: 스타일링 (그라데이션, 애니메이션, 반응형)
- **JavaScript (ES6+)**: 인터랙티브 기능

### 라이브러리
- **Plotly.js 2.27.0**: 인터랙티브 차트 시각화
- **Font**: Noto Sans KR (한글 지원)

### 데이터 분석
- **Python 3.x**
- **pandas**: 데이터 처리
- **scikit-learn**: K-means 클러스터링, StandardScaler, 실루엣 스코어
- **NumPy**: 수치 연산

## 📁 파일 구조

```
.
├── index.html          # 메인 대시보드 파일 (단일 파일)
├── README.md          # 프로젝트 설명서
└── school.csv         # 원본 데이터 (618개 식품)
```

## 🎨 디자인 특징

### 색상 테마
- **배경**: 연한 초록 그라데이션 (#a8e6cf → #dcedc1 → #ffd3b6)
- **🔵 Cluster 0**: 파랑 (#3b82f6) - 중에너지/중나트륨
- **🟢 Cluster 1**: 초록 (#10b981) - 저에너지/저나트륨 (건강)
- **🔴 Cluster 2**: 빨강 (#ef4444) - 저에너지/초고나트륨 (주의)
- **⭐ 선택**: 노란색 별 (#f59e0b) - 선택된 식품 강조

### UI/UX 특징
- 반응형 디자인 (모바일/태블릿/데스크톱)
- 부드러운 스크롤 애니메이션
- 직관적인 호버 상태
- 커스텀 스크롤바
- 그림자와 테두리로 깊이감 표현
- 클릭 시 자동 스크롤 (산점도로 이동)

## 💡 사용 예시

### 시나리오: 오늘 점심 급식 분석

**1단계: 식품 추가**
- "밥" 검색 → "흰쌀밥(210g)" 추가
- "국" 검색 → "된장국(220g)" 추가  
- "반찬" 검색 → "돼지고기볶음(50g)" 추가
- "나물" 검색 → "시금치나물(70g)" 추가

**2단계: 영양 분석 확인**
- 총 에너지: 745 kcal (93% 🟢)
- 총 나트륨: 832 mg (119% 🟡)
- 클러스터: C0 2개, C1 2개

**3단계: 평가 및 추천**
- 평가: "⚠️ 나트륨 주의"
- 추천: "국 양을 줄이거나 저나트륨 반찬 추가"

**4단계: 개별 식품 분석**
- "된장국" 클릭
- 산점도에서 별표로 위치 확인
- 클러스터 정보 확인: 저에너지/저나트륨

## 📈 향후 개선 방향

- [ ] 다른 영양소(단백질, 지방, 탄수화물) 추가 분석
- [ ] 엘보우 방법으로 최적 클러스터 수 자동 결정
- [ ] 클러스터별 식단 조합 추천 알고리즘
- [ ] CSV 파일 업로드 기능
- [ ] 데이터 내보내기 기능 (PNG, PDF, CSV)
- [ ] 다크 모드 지원
- [ ] 다차원 클러스터링 (3D/4D)
- [ ] 개인 맞춤형 영양 목표 설정

## 📝 데이터 출처

- 학교 급식 식품 영양소 데이터
- 총 618개 식품 (제외 없이 전체 분석)
- 영양성분함량기준량: 100ml

## 👨‍💻 개발자

최형배
- 포항여자고등학교 교사
- AI 기초 및 정보 교과 담당
- SW-AI 교육 전문가

## 🔬 기술적 특징

### 정규화의 중요성
```python
# 정규화 전: 나트륨(mg)이 에너지(kcal)보다 크기 때문에 나트륨에 편향
X = [[100, 500], [150, 600], [200, 700]]

# 정규화 후: 평균 0, 표준편차 1로 변환 → 동등한 비중
X_scaled = [[-1.22, -1.22], [0, 0], [1.22, 1.22]]
```

### 단일 파일 배포
- 모든 데이터와 코드가 `index.html` 하나에 포함
- 외부 의존성: Plotly CDN만 사용
- GitHub Pages에 바로 배포 가능

### 인터랙티브 기능
- 실시간 검색 필터링
- 클릭 이벤트 처리
- 동적 DOM 업데이트
- 부드러운 스크롤 애니메이션
- 프로그레스 바 애니메이션

## 📄 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.

## 🙏 감사의 말

이 대시보드는 학생들의 건강한 급식을 위해 제작되었습니다.

---

**Made with ❤️ for Better School Nutrition Analysis**

*"데이터로 보는 급식, AI로 만드는 건강한 학교"*
